{"version":3,"file":"swipe.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/swipe.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import \"./swipe.css\"\n\nconst util = {\n  extend(target) {\n    for (let i = 1, len = arguments.length; i < len; i++) {\n      for (let prop in arguments[i]) {\n        if (arguments[i].hasOwnProperty(prop)) {\n          target[prop] = arguments[i][prop]\n        }\n      }\n    }\n    return target\n  },\n  addClass(el, className) {\n    if (el.classList) {\n      el.classList.add(className)\n    } else {\n      if (!util.hasClass(el, className)) {\n        el.className = `${el.className} ${className}`\n      }\n    }\n  },\n  hasClass(el, className) {\n    if (el.classList) {\n      return el.classList.contains(className)\n    }\n    const originClass = el.className\n    return ` ${originClass} `.indexOf(` ${className} `) > -1\n  },\n  setStyle(element, style) {\n    const oldStyle = {}\n\n    const styleKeys = Object.keys(style)\n\n    styleKeys.forEach((key) => {\n      oldStyle[key] = element.style[key]\n    })\n\n    styleKeys.forEach((key) => {\n      element.style[key] = style[key]\n    })\n\n    return oldStyle\n  }\n}\n\nconst STATE_SHRINK = 0\nconst STATE_GROW = 1\n\nfunction Swipe(el, options) {\n  this.el = el\n  this.refs = {}\n  this.options = util.extend({}, this.constructor.defaultOptions, options)\n  this.init()\n  return this\n}\n\nSwipe.defaultOptions = {}\n\nSwipe.prototype.init = function () {\n  this.render()\n  this.bind()\n  return this\n}\n\n// 渲染视图\nSwipe.prototype.render = function () {\n  this.el.append(this.renderSwiper())\n}\n\nSwipe.prototype.renderSwiper = function () {\n  const div = document.createElement('div')\n  util.addClass(div, 'nalu-swipe')\n  const ul = document.createElement('ul')\n\n  const { data } = this.options\n  const result = data.map((item) => {\n    return this.renderSwiperItem(item)\n  })\n  ul.append(...result)\n  div.append(ul)\n\n  this.refs.swipe = div\n  return div\n}\n\nSwipe.prototype.renderSwiperItem = function (data) {\n  const { item, btns } = data\n  const swipeItemWrapper = document.createElement('li')\n  util.addClass(swipeItemWrapper, 'swipe-item-wrapper')\n\n  const swipeItem = document.createElement('div')\n  util.addClass(swipeItem, 'swipe-item')\n  swipeItem.setAttribute('data-type', 0)\n\n  // item-inner\n  const inner = document.createElement('div')\n  const span = document.createElement('span')\n  span.append(document.createTextNode(item.text))\n  inner.append(span)\n\n  util.addClass(inner, 'swipe-item-inner')\n  swipeItem.append(inner)\n\n  // btns\n  swipeItem.append(this.renderSwiperBtns(btns))\n\n  swipeItemWrapper.append(swipeItem)\n  return swipeItemWrapper\n}\n\nSwipe.prototype.renderSwiperBtns = function (btns) {\n  const ul = document.createElement('ul')\n  util.addClass(ul, 'swipe-btns')\n  const btnNodes = btns.map((btn) => {\n    const li = document.createElement('li')\n    util.addClass(li, 'swipe-btn')\n    const span = document.createElement('span')\n    util.addClass(span, 'text')\n    span.append(document.createTextNode(btn.text))\n\n    util.setStyle(li, { backgroundColor: btn.color })\n    li.append(span)\n    return li\n  })\n  ul.append(...btnNodes)\n\n  return ul\n}\n\nSwipe.prototype.bind = function () {\n  this.refs.swipe.addEventListener(\n    'touchstart',\n    this.onTouchStart.bind(this),\n    false\n  )\n  this.refs.swipe.addEventListener(\n    'touchmove',\n    this.onTouchMove.bind(this),\n    false\n  )\n  this.refs.swipe.addEventListener(\n    'touchend',\n    this.onTouchEnd.bind(this),\n    false\n  )\n  return this\n}\n\nSwipe.prototype.unbind = function () {}\n\nSwipe.prototype.destroy = function () {\n  this.unbind()\n  return this\n}\n\nSwipe.prototype.getTouchTarget = function (e) {\n  let target = e.target\n  while (target && !target.classList.contains('swipe-item')) {\n    target = target.parentElement\n  }\n  return target\n}\n\nSwipe.prototype.onTouchStart = function (e) {\n  const target = this.getTouchTarget(e)\n  if (!target.classList.contains('swipe-item')) return\n\n  const point = e.touches[0]\n  this.startX = point.pageX\n}\n\nSwipe.prototype.onTouchMove = function (e) {\n  // e.preventDefault()\n  // const target = this.getTouchTarget(e)\n  // if (!target.classList.contains('swipe-item')) return\n  // const point = e.touches[0]\n  // this.endX = point.pageX\n  // const deltaX = this.startX - this.endX\n  // util.setStyle(target, { transform: `translate3d(${-deltaX}px, 0, 0)` })\n}\n\nSwipe.prototype.onTouchEnd = function (e) {\n  const target = this.getTouchTarget(e)\n  if (!target.classList.contains('swipe-item')) return\n  const point = e.changedTouches[0]\n  this.endX = point.pageX\n  const delatX = this.startX - this.endX\n  // 左滑\n  if (target.dataset.type == 0 && delatX > 30) {\n    this.restSlide()\n    target.dataset.type = 1\n  }\n  // 右滑\n  if (target.dataset.type == 1 && delatX < -30) {\n    this.restSlide()\n    target.dataset.type = 0\n  }\n  this.startX = 0\n  this.endX = 0\n}\n\nSwipe.prototype._translate = function () {}\n\n//复位滑动状态\nSwipe.prototype.restSlide = function () {\n  let swiperItems = document.querySelectorAll('.swipe-item')\n  // 复位\n  for (let i = 0; i < swiperItems.length; i++) {\n    swiperItems[i].dataset.type = 0\n  }\n}\n\nexport default Swipe\n"],"names":[],"mappings":"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"}